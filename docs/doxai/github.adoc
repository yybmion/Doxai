```asciidoc
= GitHubClient Class Documentation

== Overview

The `GitHubClient` class provides a wrapper around the GitHub API using the `@actions/github` library.  It enhances the API interaction with error handling, logging (using a `Logger` class - assumed to be defined elsewhere), and helper functions for common GitHub operations within a GitHub Actions context.  The class relies on environment variables (`GITHUB_REPOSITORY_OWNER`, `GITHUB_REPOSITORY`) to determine the target repository.  The `config.githubToken` (from an assumed `./config.js` file) provides the authentication token.


== Dependencies

* `@actions/github`: For interacting with the GitHub API.
* `./config`: Assumed to contain the `githubToken`.  Details unclear.
* `./logger`: Assumed to be a custom logging class. Details unclear.


== Class: GitHubClient

=== Constructor

`GitHubClient(token = config.githubToken)`

Initializes the `GitHubClient` instance.  It retrieves the GitHub token from `config.githubToken` by default.  It also retrieves the repository owner and name from environment variables.  If the repository context is not available, it throws an error.

=== Methods

==== `findExistingDocsPR(sourcePrNumber, project)`

[source,javascript]
----
async findExistingDocsPR(sourcePrNumber, project) {
  // ...
}
----

Finds an existing open pull request related to documentation generation for a given source PR and project.  It searches for PRs with titles matching a pattern or branch names starting with a pattern. Returns an object containing PR details if found, otherwise `null`.  Error handling is included.

==== `createOrGetDocsBranch(baseBranch, newBranch, sourcePrNumber, project)`

[source,javascript]
----
async createOrGetDocsBranch(baseBranch, newBranch, sourcePrNumber, project) {
  // ...
}
----

Creates a new documentation branch if it doesn't exist, or retrieves an existing one.  It first checks for an existing PR; if found, it uses that branch. Otherwise, it checks for the branch's existence. If the branch exists but no PR is found, it reuses the existing branch. If neither a PR nor a branch exists, it creates a new branch.  Returns an object indicating the branch name, whether it was created, and any existing PR information.

==== `createBranch(branchName, baseBranch)`

[source,javascript]
----
async createBranch(branchName, baseBranch) {
  // ...
}
----

Creates a new branch from a base branch.  Handles the case where the branch already exists (422 error).

==== `branchExists(branchName)`

[source,javascript]
----
async branchExists(branchName) {
  // ...
}
----

Checks if a branch exists.

==== `getPRDetails(prNumber)`

[source,javascript]
----
async getPRDetails(prNumber) {
  // ...
}
----

Retrieves details of a pull request, including author, creation/update times, merge status, and branch information.  Handles the case where the PR is not found (404 error).

==== `getChangedFiles(prNumber)`

[source,javascript]
----
async getChangedFiles(prNumber) {
  // ...
}
----

Retrieves a list of changed files in a pull request, handling pagination.

==== `getFileContent(path, ref)`

[source,javascript]
----
async getFileContent(path, ref) {
  // ...
}
----

Retrieves the content of a file from a given path and branch/commit reference.  Handles cases where the path is a directory or the file is not found (404 error).

==== `commitFile(branch, path, content, message)`

[source,javascript]
----
async commitFile(branch, path, content, message) {
  // ...
}
----

Creates or updates a file on a given branch.  Automatically handles the SHA for updates.

==== `createPR(title, body, head, base)`

[source,javascript]
----
async createPR(title, body, head, base) {
  // ...
}
----

Creates a pull request.  Validates that both head and base branches exist. Handles the case where a PR already exists between the branches (422 error).

==== `createComment(issueNumber, body)`

[source,javascript]
----
async createComment(issueNumber, body) {
  // ...
}
----

Creates a comment on a pull request or issue.

==== `hasSourceFileChanged(sourceFile, docFile, docsBranch, sourceBranch)`

[source,javascript]
----
async hasSourceFileChanged(sourceFile, docFile, docsBranch, sourceBranch) {
  // ...
}
----

Checks if a source file has been modified since the last commit to the corresponding documentation file.  Handles cases where no commits are found for either file.  If an error occurs during the comparison, it assumes the source file has changed.

==== `commitMultipleFiles(branch, files, message)`

[source,javascript]
----
async commitMultipleFiles(branch, files, message) {
  // ...
}
----
Commits multiple files in a single commit.  This method retrieves the latest commit SHA, creates blobs for each file, creates a new tree, creates a new commit, and updates the branch reference.  Error handling is included.


== Example Usage (Illustrative)

[source,javascript]
----
const GitHub = require('./github');
const client = new GitHub();

async function run() {
  try {
    const prDetails = await client.getPRDetails(123);
    console.log(prDetails);
  } catch (error) {
    console.error(error);
  }
}

run();
----

Note: This is a simplified example.  Actual usage will depend on the specific needs of the application.  Error handling and logging are crucial in production environments.

== PR Information
- PR Number: 26
- Author: yybmion
- Created Date: 2025-05-26
- Last Modified: 2025-05-26 by yybmion
```
